# USBメモリで ZFS ！

## ZFSの習得にはUSBメモリが最適

時々ZFSを勉強するにはどうすればいいの？と聞かれることがあるのですが、筆者のおすすめはUSBメモリで試すことです。

ZFSによるRAID構成を実験する場合複数のストレージデバイスを用意する必要がありますが、SSDやHDDでRAID構成を試せる台数をそろえるのは大変です。USBメモリであればUSBハブと組み合わせることで複数のデバイスを試せて価格とスペースの点で有利で、さらに稼働中にいきなり抜く等の乱暴な試験も実現でき、ZFSでのRAID構成を習得するにはある意味うってつけと言えます。特にLED付きのUSBメモリであればアクセスの様子も目視で確認できるので見ていても楽しいです。🙂

ここではUSBメモリを組み合わせて、ZFSによる様々なRAIDを構成毎の特徴を含めて設定してみます。

なおZFSにUSBメモリを使うという元ネタは、過去にサン・マイクロシステムズの「やっぱり Sun がスキ！」というSolarisの機能などを紹介するブログで、本記事と同じく「USBメモリで ZFS ！」のタイトルで投稿されたものです[^yappari]。

[^yappari]:2007年5月に投稿されたものでサイトはすでに閉鎖されていますが、当時の記事は[インターネットアーカイブで確認](https://web.archive.org/web/20071013152120/http://blogs.sun.com/yappri/entry/usb_zfs)できます。この記事を見て数年後に実際に自分で試したときは、なぜかUSB HDDが複数あったため、USBメモリでは無く[USB HDDで実験](https://www.facebook.com/photo?fbid=685848231475753&set=a.148549968538918)しました。

## USBメモリ 4個 と USBハブの準備

実験に使うUSBメモリですが、筆者の場合少し前に100円ショップのSeriaでUSBのメモリカードリーダを入手していました。使ってみるとアクセスLED付きで便利だったので、今回3個追加購入して手元にあったSDカードやMicroSDカードと組み合わせてUSBメモリにします。4個あればRAID6やRAID10(イチゼロ)も試せるので、実験にはもってこいとなります。

USBハブは手持ちのものを利用しました。この形だとメモリカードリーダが相互に干渉せずに配置できます。実際にPCに接続すると、次のアニメーションようにデバイスを1個づつ認識するのがわかります。

## ここにアニメーション

## 

